<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll('.editable-container').forEach(container => {
      const contentDiv = container.querySelector('.editable-content');
      const editBtn = container.querySelector('.edit-btn');
      const saveBtn = container.querySelector('.save-btn');
      const cancelBtn = container.querySelector('.cancel-btn');

      let originalContent = contentDiv.innerHTML;

      editBtn.addEventListener('click', () => {
        contentDiv.contentEditable = "true";
        contentDiv.focus();
        editBtn.style.display = 'none';
        saveBtn.style.display = 'inline-block';
        cancelBtn.style.display = 'inline-block';
        originalContent = contentDiv.innerHTML;
      });

      saveBtn.addEventListener('click', () => {
        contentDiv.contentEditable = "false";
        editBtn.style.display = 'inline-block';
        saveBtn.style.display = 'none';
        cancelBtn.style.display = 'none';
        const updatedContent = contentDiv.innerHTML;

        // Hook to send updatedContent to your PR creation logic
        if (window.handleContentSave) {
          window.handleContentSave(updatedContent);
        }
      });

      cancelBtn.addEventListener('click', () => {
        contentDiv.innerHTML = originalContent;
        contentDiv.contentEditable = "false";
        editBtn.style.display = 'inline-block';
        saveBtn.style.display = 'none';
        cancelBtn.style.display = 'none';
      });
    });
  });
</script>
