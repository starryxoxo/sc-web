<script>
  // Toggle for 1% overlay chance (commented out by default to always show)
  // const showOverlay = Math.random() < 0.01;

  // For now, always show the overlay for testing
  const showOverlay = true;

  if (showOverlay) {
    // Build the bottom-fixed retry button as the only interactive element (replacing the download)
    // The original overlay content will be hidden behind the overlay; here we implement the
    // requested bottom-and-stationary retry button approach.

    // Create overlay that covers the screen but with black background and white text
    const overlay = document.createElement('div');
    overlay.style.position = 'fixed';
    overlay.style.top = '0';
    overlay.style.left = '0';
    overlay.style.width = '100vw';
    overlay.style.height = '100vh';
    overlay.style.backgroundColor = 'black';
    overlay.style.color = 'white';
    overlay.style.display = 'flex';
    overlay.style.flexDirection = 'column';
    overlay.style.justifyContent = 'flex-end';
    overlay.style.alignItems = 'stretch';
    overlay.style.zIndex = '9999';
    // Ensure the content scales nicely on small screens
    overlay.style.paddingTop = '20px';
    overlay.style.paddingBottom = '0';

    // Message area at center (but visually content will be behind, since the requirement is the bottom retry)
    const spacer = document.createElement('div');
    spacer.style.flex = '1';
    overlay.appendChild(spacer);

    const message = document.createElement('div');
    message.textContent = 'Unable to view this page.';
    message.style.textAlign = 'center';
    message.style.fontSize = '24px';
    message.style.margin = '0 auto';
    message.style.padding = '12px 16px';
    overlay.appendChild(message);

    // Retry button positioned at bottom, full width
    const retryButton = document.createElement('button');
    retryButton.textContent = 'Retry';
    retryButton.style.width = '100%';
    retryButton.style.padding = '25px';
    retryButton.style.fontSize = '16px';
    retryButton.style.cursor = 'pointer';
    retryButton.style.border = '0';
    retryButton.style.backgroundColor = '#ffffff';
    retryButton.style.color = '#000';
    retryButton.style.marginTop = '10px';
    retryButton.style.borderTop = '1px solid #555'; // subtle separation
    retryButton.onclick = () => {
      // Simple retry: remove overlay and re-run (reloads current script block or page logic)
      if (overlay && overlay.parentNode) {
        overlay.parentNode.removeChild(overlay);
      }
      // Basic retry behavior: reload the page to attempt overlay again with 1% chance
      // If you want to keep this purely in-page, you can replace the overlay instead of reloading.
      window.location.reload();
    };

    overlay.appendChild(retryButton);

    // Attach overlay to body
    document.body.appendChild(overlay);
  }

  // Optional: function placeholders for saving/retrieving pages
  // (not used in this simplified overlay-only version)
</script>